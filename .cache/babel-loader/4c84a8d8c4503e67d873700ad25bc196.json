{"ast":null,"code":"'use strict';\n\nconst u = require('universalify').fromCallback;\n\nconst fs = require('fs');\n\nconst path = require('path');\n\nconst mkdir = require('../mkdirs');\n\nconst remove = require('../remove');\n\nconst emptyDir = u(function emptyDir(dir, callback) {\n  callback = callback || function () {};\n\n  fs.readdir(dir, (err, items) => {\n    if (err) return mkdir.mkdirs(dir, callback);\n    items = items.map(item => path.join(dir, item));\n    deleteItem();\n\n    function deleteItem() {\n      const item = items.pop();\n      if (!item) return callback();\n      remove.remove(item, err => {\n        if (err) return callback(err);\n        deleteItem();\n      });\n    }\n  });\n});\n\nfunction emptyDirSync(dir) {\n  let items;\n\n  try {\n    items = fs.readdirSync(dir);\n  } catch (err) {\n    return mkdir.mkdirsSync(dir);\n  }\n\n  items.forEach(item => {\n    item = path.join(dir, item);\n    remove.removeSync(item);\n  });\n}\n\nmodule.exports = {\n  emptyDirSync,\n  emptydirSync: emptyDirSync,\n  emptyDir,\n  emptydir: emptyDir\n};","map":null,"metadata":{},"sourceType":"script"}