{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/objectSpread\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"/Users/brentvatne/coding/react-navigation-stack/src/views/Header/HeaderBackButton.tsx\";\nimport * as React from 'react';\nimport { I18nManager, Image, Text, View, Platform, StyleSheet } from 'react-native';\nimport TouchableItem from '../TouchableItem';\nimport defaultBackImage from '../assets/back-icon.png';\nimport BackButtonWeb from './BackButtonWeb';\n\nvar HeaderBackButton = function (_React$PureComponent) {\n  _inherits(HeaderBackButton, _React$PureComponent);\n\n  function HeaderBackButton() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, HeaderBackButton);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(HeaderBackButton)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {};\n\n    _this.handleTextLayout = function (e) {\n      if (_this.state.initialTextWidth) {\n        return;\n      }\n\n      _this.setState({\n        initialTextWidth: e.nativeEvent.layout.x + e.nativeEvent.layout.width\n      });\n    };\n\n    _this.getTitleText = function () {\n      var _this$props = _this.props,\n          width = _this$props.width,\n          title = _this$props.title,\n          truncatedTitle = _this$props.truncatedTitle;\n      var initialTextWidth = _this.state.initialTextWidth;\n\n      if (title === null) {\n        return null;\n      } else if (!title) {\n        return truncatedTitle;\n      } else if (initialTextWidth && width && initialTextWidth > width) {\n        return truncatedTitle;\n      } else {\n        return title;\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(HeaderBackButton, [{\n    key: \"renderBackImage\",\n    value: function renderBackImage() {\n      var _this$props2 = this.props,\n          backImage = _this$props2.backImage,\n          backTitleVisible = _this$props2.backTitleVisible,\n          tintColor = _this$props2.tintColor;\n      var title = this.getTitleText();\n\n      if (React.isValidElement(backImage)) {\n        return backImage;\n      } else if (backImage) {\n        var BackImage = backImage;\n        return React.createElement(BackImage, {\n          tintColor: tintColor,\n          title: title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          }\n        });\n      } else {\n        return React.createElement(Image, {\n          style: [styles.icon, !!backTitleVisible && styles.iconWithTitle, !!tintColor && {\n            tintColor: tintColor\n          }],\n          source: defaultBackImage,\n          fadeDuration: 0,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          }\n        });\n      }\n    }\n  }, {\n    key: \"maybeRenderTitle\",\n    value: function maybeRenderTitle() {\n      var _this$props3 = this.props,\n          allowFontScaling = _this$props3.allowFontScaling,\n          backTitleVisible = _this$props3.backTitleVisible,\n          titleStyle = _this$props3.titleStyle,\n          tintColor = _this$props3.tintColor;\n      var backTitleText = this.getTitleText();\n\n      if (!backTitleVisible || backTitleText === null) {\n        return null;\n      }\n\n      return React.createElement(Text, {\n        accessible: false,\n        onLayout: this.handleTextLayout,\n        style: [styles.title, !!tintColor && {\n          color: tintColor\n        }, titleStyle],\n        numberOfLines: 1,\n        allowFontScaling: !!allowFontScaling,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        }\n      }, this.getTitleText());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          onPress = _this$props4.onPress,\n          pressColorAndroid = _this$props4.pressColorAndroid,\n          title = _this$props4.title,\n          disabled = _this$props4.disabled;\n      var button = React.createElement(TouchableItem, {\n        disabled: disabled,\n        accessible: true,\n        accessibilityRole: \"button\",\n        accessibilityComponentType: \"button\",\n        accessibilityLabel: title ? title + \", back\" : 'Go back',\n        accessibilityTraits: \"button\",\n        testID: \"header-back\",\n        delayPressIn: 0,\n        onPress: disabled ? undefined : onPress,\n        pressColor: pressColorAndroid,\n        style: [styles.container, disabled && styles.disabled],\n        borderless: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        }\n      }, React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        }\n      }, this.renderBackImage(), this.maybeRenderTitle()));\n\n      if (Platform.OS === 'ios') {\n        return button;\n      } else {\n        return React.createElement(View, {\n          style: styles.androidButtonWrapper,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          }\n        }, button);\n      }\n    }\n  }]);\n\n  return HeaderBackButton;\n}(React.PureComponent);\n\nHeaderBackButton.defaultProps = {\n  pressColorAndroid: 'rgba(0, 0, 0, .32)',\n  tintColor: Platform.select({\n    ios: '#037aff',\n    web: '#5f6368'\n  }),\n  truncatedTitle: 'Back',\n  backImage: Platform.select({\n    web: BackButtonWeb\n  })\n};\nvar styles = StyleSheet.create({\n  disabled: {\n    opacity: 0.5\n  },\n  androidButtonWrapper: _objectSpread({\n    margin: 13,\n    backgroundColor: 'transparent'\n  }, Platform.select({\n    web: {\n      marginLeft: 21\n    },\n    default: {}\n  })),\n  container: {\n    alignItems: 'center',\n    flexDirection: 'row',\n    backgroundColor: 'transparent'\n  },\n  title: {\n    fontSize: 17,\n    paddingRight: 10\n  },\n  icon: Platform.select({\n    ios: {\n      backgroundColor: 'transparent',\n      height: 21,\n      width: 13,\n      marginLeft: 9,\n      marginRight: 22,\n      marginVertical: 12,\n      resizeMode: 'contain',\n      transform: [{\n        scaleX: I18nManager.isRTL ? -1 : 1\n      }]\n    },\n    default: {\n      height: 24,\n      width: 24,\n      margin: 3,\n      resizeMode: 'contain',\n      backgroundColor: 'transparent',\n      transform: [{\n        scaleX: I18nManager.isRTL ? -1 : 1\n      }]\n    }\n  }),\n  iconWithTitle: Platform.OS === 'ios' ? {\n    marginRight: 6\n  } : {}\n});\nexport default HeaderBackButton;","map":null,"metadata":{},"sourceType":"module"}