{"ast":null,"code":"'use strict';\n\nconst fs = require('graceful-fs');\n\nconst BUF_LENGTH = 64 * 1024;\n\nconst _buff = require('../util/buffer')(BUF_LENGTH);\n\nfunction copyFileSync(srcFile, destFile, options) {\n  const overwrite = options.overwrite;\n  const errorOnExist = options.errorOnExist;\n  const preserveTimestamps = options.preserveTimestamps;\n\n  if (fs.existsSync(destFile)) {\n    if (overwrite) {\n      fs.unlinkSync(destFile);\n    } else if (errorOnExist) {\n      throw new Error(\"\".concat(destFile, \" already exists\"));\n    } else return;\n  }\n\n  const fdr = fs.openSync(srcFile, 'r');\n  const stat = fs.fstatSync(fdr);\n  const fdw = fs.openSync(destFile, 'w', stat.mode);\n  let bytesRead = 1;\n  let pos = 0;\n\n  while (bytesRead > 0) {\n    bytesRead = fs.readSync(fdr, _buff, 0, BUF_LENGTH, pos);\n    fs.writeSync(fdw, _buff, 0, bytesRead);\n    pos += bytesRead;\n  }\n\n  if (preserveTimestamps) {\n    fs.futimesSync(fdw, stat.atime, stat.mtime);\n  }\n\n  fs.closeSync(fdr);\n  fs.closeSync(fdw);\n}\n\nmodule.exports = copyFileSync;","map":null,"metadata":{},"sourceType":"script"}